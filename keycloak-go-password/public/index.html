<!DOCTYPE html>
<html>

<head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Keycloak OAuth2 Example (Password Grant)</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <style type="text/css">
                body {
                        font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
                        text-align: center;
                       
                }
                input {font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;}
                p {
                        width: 68%;
                        margin-left: auto;
                        margin-right: auto;
                        text-align: center;
                       
                }
                </style>
</head>

<body >
        <br><br><br><br><br><h2>Login to X System (Actually by Sending Auth Request to Keycloak) </h2>

        <form name="x-sys-login-form" action="/oauth/login" >
                <input  type="text" name="username" id="xu" placeholder="user name" /><br>
                <input  type="password" id="xp" name="password" placeholder="password" /><br><br>
                <input  type="button" onclick="Login();" value="Login" />&nbsp;&nbsp;<input type="button" onclick="Cancel();" value="Cancel" /><br>
        </form>

        <p>Note, as <a href="https://oauth.net/2.1/">Oauth 2.1</a> is omitting <strong>the password grant flow </strong> due to it's inherently insecure, you should not use this flow in most of your business scenarios. Instead, you should try to use the authorization code grant. Check out below Chinese document if it helps.<br>
<a href="https://zhuanlan.zhihu.com/p/440484422">OAuth2.1带来的变化</a>


        </p>

        <script>

                const $v = (id) => {
                        return document.getElementById(id).value;
                }

                const $ = (id) => {
                        return document.getElementById(id);
                }

                const Login = () => {
                        var u = $v("xu");
                        var p = $v("xp");
                        if (u == "" || p == "") {
                                alert("invalid username or password")
                                return
                        }
                        document.forms[0].submit();
                }
                const Cancel = () => {
                        $("xu").value="";
                        $("xp").value="";
                }
        </script>
</body>

</html>